<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

	<div>
		<h3 class="control-sidebar-heading add-user-box-title">Create new client</h3>
		<i id="btn-add-new-client" class="btn btn-danger fa fa-user-plus add-user-box-collapse-icon border-radius" onclick="userModule.hideShowUserForm()"/>
		<!-- btn btn-success float-right border-radius -->
	</div>
	
	<h:form id="frm-add-new-client" class="add-user-box collapse">
		<div class="form-group">
			<h:outputLabel for="lblNewUserName" value="#{msg.newUserName}" />
			<h:inputText id="txtNewUserName" placeholder="#{msg.newUserName}" 
				class="form-control" value="#{sidePanelUserControl.username}" required="true" requiredMessage="Please enter a name" >
					<f:validateRequired />
				</h:inputText>
			<h:message class="label label-danger" for="txtNewUserName"/>
		</div>
		<div class="form-group">
			<h:outputLabel for="lblPhoneNumber" value="#{msg.phoneNumber}" />
			<h:inputText id="txtPhoneNumber" placeholder="#{msg.phoneNumber}" 
				class="form-control" value="#{sidePanelUserControl.phoneNumber}" />
		</div>
	
		<div class="sidebar add-user-collapsable">
			<ul class="control-sidebar-menu no-margin">
				<li><a id="a-addUser" onclick="userModule.onAddUserClick();">
						<i id="iconAddUser" class="menu-icon fa fa-map-marker bg-green"></i>
						<div class="menu-info">
							<h4 class="control-sidebar-subheading">#{msg.chooseLocation}</h4>
							<p>#{msg.clickOnMapToChooseLocation}</p>
						</div>
				</a></li>
			</ul>
		</div>
		<div class="box-footer background-transparent">
			<h:commandButton action="#{sidePanelUserControl.cancel}" class="btn btn-default"  value="cancel" >
				  <f:ajax render="@form" />
			</h:commandButton>
			<h:commandButton action="#{sidePanelUserControl.save}" class="btn btn-primary pull-right"  value="save">
				  <f:ajax render="@form"  execute="@form"/>
			</h:commandButton>
		</div>
		
		<h:inputHidden id="addUser-selectedIcon"  value="#{sidePanelUserControl.selectedSymbol}"/>
		<h:inputHidden id="addUser-userPositionX"  value="#{sidePanelUserControl.userPositionX}"/>
		<h:inputHidden id="addUser-userPositionY"  value="#{sidePanelUserControl.userPositionY}"/>
	</h:form>
	
	
	
	<!-- search & list of users -->
	
			<h3 class="control-sidebar-heading user-search-title border-top">users</h3>
		<!-- user search box -->
		<div class="sidebar">
				<div class="input-group">
						<input type="text" name="search" class="form-control"
							placeholder="find user..." id="myFilter"> </input> <span class="input-group-btn">
							<button type="submit" name="search" id="searchLandmark-btn"
								class="btn btn-flat btn-success ">
								<i class="fa fa-search"></i>
							</button>
						</span>
				</div>
		</div>
			
		<ul class="control-sidebar-menu no-margin"
		 	data-role="listview" data-filter="true" data-input="#myFilter" data-autodividers="true" data-inset="true">
			<ui:repeat var="user" value="#{mapControl.users}">
				<c:set var="v_onClick" value="#{user.x} ne null? mapControlModule.zoomToLocation(#{user.x},#{user.y}): ''"></c:set>
				<li>
					<div class="widget widget-shadow padding-2">
						<div class="widget-content text-center bg-white  btn-success ">
							<a href="#" class="avatar margin-bottom-5">
								 <img class="float-left"
										src="../../resources/img/user2-160x160.jpg" alt="Viola_photo" />
								<span class="color-white">
									#{user.iduser} <br />
									#{user.userName} <br />
								</span>
								<h:panelGroup rendered="#{user.x ne null}">
									<button title="view on map" class="btn btn-success float-right border-radius" onclick="mapControlModule.zoomToLocation(#{user.x},#{user.y})"><i class="fa fa-eye"></i></button>
								</h:panelGroup>
							</a>
						</div>
					</div>
				</li>
			</ui:repeat>
		</ul>
		<!-- /.control-sidebar-menu -->
</html>